<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>nao pensei em mais nada</title>
<style>
  :root{
    --pink:#ff6fb7; --pink2:#ff9bd0; --lav:#c7a3ff; --sky1:#b3e5ff; --sky2:#fff0f6;
    --grass:#75c66b; --dirt:#9c6b3f; --ui:#222;
  }
  html,body{margin:0;height:100%;font-family:system-ui,Segoe UI,Arial}
  body{background:linear-gradient(180deg,var(--sky1),var(--sky2));overflow:hidden}
  #wrap{max-width:980px;margin:0 auto;padding:8px}
  h1{font-weight:700;color:#a03284;text-align:center;margin:8px 0 0 0}
  .hint{color:#444;text-align:center;margin:0 0 8px 0}
  canvas{display:block;width:100%;max-width:980px;height:auto;aspect-ratio:16/9;border:3px solid var(--pink);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.15);background:transparent}

  /* Modal de pergunta */
  #question{
    position:fixed;inset:0;display:none;align-items:center;justify-content:center;
    background:rgba(255,192,203,.85);backdrop-filter:blur(2px);z-index:10
  }
  .card{
    width:min(520px,92vw);background:#fff0f6;border:3px solid var(--pink);
    border-radius:20px;padding:22px;box-shadow:0 10px 40px rgba(160,50,132,.35);
    text-align:center
  }
  .card h2{margin:0 0 10px 0;color:#a03284}
  .btns{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-top:12px}
  .btn{
    font-size:18px;border:none;border-radius:12px;padding:10px 18px;cursor:pointer;
    transition:transform .08s ease, box-shadow .15s ease
  }
  .btn:active{transform:translateY(1px)}
  #yes{background:linear-gradient(90deg,var(--pink),var(--pink2));color:#fff;box-shadow:0 6px 0 #d6509a}
  #no{background:#ffe1f1;color:#a03284;box-shadow:0 6px 0 #e5b8cf;position:relative}
  small{display:block;margin-top:6px;color:#666}
</style>
</head>
<body>
    
  <div id="wrap">
    <h1>üéÄ Aventuras da themise üéÄ</h1>
    <p class="hint">Setas esquerda/direita para andar ‚Ä¢ Barra de espa√ßo para pular ‚Ä¢ Chegue √† bandeira üíñ</p>
    <canvas id="game" width="960" height="540" aria-label="Jogo 2D side-scroller"></canvas>
  </div>

  <!-- Modal de pergunta (aparece s√≥ ap√≥s CRUZAR a bandeira) -->
  <div id="question" role="dialog" aria-modal="true">
    <div class="card">
      <h2> Parab√©ns! voc√™ chegou ao final do jogo mais dificil da vida (calada) üéâ</h2>
      <h2> eu de fato sou a melhor amiga do mundo n√©?</h2>
      <p> agora √© sua vez de me devolver aqueles 6 reais do brigadeiro n√©?</p>
      <div class="btns">
        <button id="yes" class="btn">Sim, muito melhor que aquelas l√° (coadjuvantes).  </button>
        <button id="no" class="btn">N√£o</button>
      </div>
      <small>ps: n√£o adianta tentar clicar no ‚Äún√£o‚Äù üëÄ</small>
    </div>
  </div>

<script>
/* ================== CONFIG B√ÅSICA ================== */
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const W = canvas.width;
const H = canvas.height;

/* Mundo e c√¢mera */
const world = {
  gravity: 0.9,
  friction: 0.82,
  width: 4200,   // comprimento do n√≠vel
  height: H
};

let cameraX = 0;

/* Entrada */
const keys = new Set();
addEventListener('keydown', e => {
  if (['ArrowLeft','ArrowRight','Space','ArrowUp'].includes(e.code)) e.preventDefault();
  keys.add(e.code);
});
addEventListener('keyup', e => keys.delete(e.code));

/* ================== PERSONAGEM (Nina) ================== */
const player = {
  x: 80, y: 0, w: 40, h: 54,
  vx: 0, vy: 0,
  speed: 0.9,   // acelera√ß√£o
  maxSpeed: 5.2,
  jumpPower: 17,
  onGround: false,
  facing: 1, // 1 direita, -1 esquerda
  colorDress: '#ff7fb2',
  colorHair: '#5b3a2e',
  colorSkin: '#ffd7c2',
  colorBow: '#ffb9dd'
};

/* ================== PLATAFORMAS E OBST√ÅCULOS ================== */
const groundY = H - 80;

const platforms = [
  // ch√£o principal em segmentos
  {x:0, y:groundY, w:world.width, h:80, type:'ground'},
  // pequenos "degraus" e blocos
  {x:480, y:groundY-60, w:140, h:20, type:'block'},
  {x:740, y:groundY-110, w:120, h:20, type:'block'},
  {x:980, y:groundY-160, w:120, h:20, type:'block'},

  {x:1400, y:groundY-70, w:140, h:20, type:'block'},
  {x:1700, y:groundY-120, w:120, h:20, type:'block'},
  {x:1950, y:groundY-170, w:120, h:20, type:'block'},

  {x:2400, y:groundY-80, w:180, h:20, type:'block'},
  {x:2650, y:groundY-80, w:120, h:20, type:'block'},
  {x:2950, y:groundY-130, w:160, h:20, type:'block'},

  // ‚Äúcanos‚Äù/obst√°culos
  {x:1200, y:groundY-60, w:60, h:60, type:'pipe'},
  {x:1600, y:groundY-80, w:70, h:80, type:'pipe'},
  {x:2200, y:groundY-100, w:70, h:100, type:'pipe'},
  {x:3100, y:groundY-70, w:70, h:70, type:'pipe'}
];

/* Bandeira de chegada */
const flag = { x: 3900, y: groundY-170, w: 14, h: 170, reached:false, crossed:false };

/* ================== DESENHO DO CEN√ÅRIO (parallax) ================== */
function drawBackground() {
  // c√©u j√° √© o background do body, mas desenhamos elementos para parallax
  const cloudColor = 'rgba(255,255,255,0.9)';
  const hill1 = '#d6b9ff';
  const hill2 = '#bda0ff';
  const flowers = ['#ff8ac2','#ffc9de','#ffd9f0','#ff9bd0'];

  // Parallax offsets
  const c1 = (cameraX * 0.2) % W;
  const c2 = (cameraX * 0.4) % W;

  // nuvens camada 1
  ctx.fillStyle = cloudColor;
  for (let i=0;i<5;i++){
    const x = ((i*260 - c1) % (W+260)) - 130;
    cloud(x, 80 + (i%2)*30, 90, 28);
  }
  // nuvens camada 2
  for (let i=0;i<4;i++){
    const x = ((i*350 - c2) % (W+350)) - 175;
    cloud(x, 40 + (i%2)*25, 130, 34);
  }

  // colinas
  hill( - (cameraX*0.15)% (W+600), hill1, 520, 120);
  hill( 300 - (cameraX*0.08)% (W+600), hill2, 620, 160);

  // gramado frontal (borda superior)
  ctx.fillStyle = '#4caf50';
  ctx.fillRect(0, groundY-8, W, 8);

  // florzinhas no gramado (aleat√≥rias baseadas na c√¢mera)
  const seed = Math.floor(cameraX/40);
  for (let i=0;i<12;i++){
    const fx = ( (i*80 + seed*37) % (W+160) ) - 40;
    flower(fx, groundY-10, flowers[i%flowers.length]);
  }
}
function cloud(x,y,w,h){
  ctx.beginPath();
  ctx.ellipse(x,y,w,h,0,0,Math.PI*2);
  ctx.ellipse(x+w*0.4,y-10,w*0.8,h*0.9,0,0,Math.PI*2);
  ctx.ellipse(x-w*0.4,y-8,w*0.7,h*0.8,0,0,Math.PI*2);
  ctx.fill();
}
function hill(x,color,baseW,height){
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.moveTo(x, groundY);
  ctx.quadraticCurveTo(x+baseW/2, groundY-height, x+baseW, groundY);
  ctx.lineTo(x+baseW, H);
  ctx.lineTo(x, H);
  ctx.closePath();
  ctx.fill();
}
function flower(x,y,color){
  ctx.save();
  ctx.translate(x-cameraX,y);
  ctx.fillStyle = '#3e7a3d';
  ctx.fillRect(-1,2,2,10); // talo
  ctx.fillStyle = color;
  for (let i=0;i<5;i++){
    ctx.beginPath();
    ctx.arc(Math.cos(i*1.256)*4, Math.sin(i*1.256)*4, 3.2, 0, Math.PI*2);
    ctx.fill();
  }
  ctx.fillStyle = '#ffe17a';
  ctx.beginPath(); ctx.arc(0,0,2.6,0,Math.PI*2); ctx.fill();
  ctx.restore();
}

/* ================== DESENHO: PLATAFORMAS/OBST√ÅCULOS ================== */
function drawLevel() {
  for (const p of platforms) {
    const sx = p.x - cameraX;
    if (sx + p.w < -50 || sx > W+50) continue;

    if (p.type === 'ground') {
      // terra
      ctx.fillStyle = '#8b5a2b';
      ctx.fillRect(sx, p.y+20, p.w, p.h-20);
      // grama
      ctx.fillStyle = '#76c76c';
      ctx.fillRect(sx, p.y, p.w, 22);
      // textura simples
      ctx.fillStyle = 'rgba(255,255,255,.12)';
      for (let i=0;i<p.w;i+=28) ctx.fillRect(sx+i, p.y+18, 8, 2);
    } else if (p.type === 'block') {
      brick(sx, p.y, p.w, p.h);
    } else if (p.type === 'pipe') {
      pipe(sx, p.y, p.w, p.h);
    }
  }

  // Bandeira
  const bx = flag.x - cameraX;
  ctx.fillStyle = '#7a4f2a'; // mastro
  ctx.fillRect(bx, flag.y, flag.w, flag.h);
  // bandeirinha em cora√ß√£o
  ctx.save();
  ctx.translate(bx+flag.w, flag.y+20);
  ctx.fillStyle = flag.crossed ? '#ffd166' : '#ff79c6';
  heart(0,0,14);
  ctx.restore();

  // linha de chegada (faixa no ch√£o)
  ctx.fillStyle = '#222';
  for (let i=0;i<10;i++){
    ctx.fillRect(bx-10 + i*14, groundY-6, 8, 6);
  }
}
function brick(x,y,w,h){
  ctx.fillStyle = '#d68b59';
  ctx.fillRect(x,y,w,h);
  ctx.strokeStyle = '#b67244';
  ctx.lineWidth = 2;
  // linhas de tijolinho
  for (let yy = y; yy < y+h; yy += 10){
    ctx.beginPath(); ctx.moveTo(x,yy); ctx.lineTo(x+w,yy); ctx.stroke();
  }
  for (let xx = x; xx < x+w; xx += 20){
    ctx.beginPath(); ctx.moveTo(xx,y); ctx.lineTo(xx,y+h); ctx.stroke();
  }
}
function pipe(x,y,w,h){
  ctx.fillStyle = '#37b34a';
  ctx.fillRect(x,y,w,h);
  ctx.fillStyle = '#44cc59';
  ctx.fillRect(x-6,y-16,w+12,20); // aro
  ctx.strokeStyle = '#2e8a39'; ctx.lineWidth = 3;
  ctx.strokeRect(x,y,w,h);
}
function heart(cx,cy,r){
  ctx.beginPath();
  ctx.moveTo(cx,cy);
  ctx.bezierCurveTo(cx-r,cy-r, cx-2*r,cy+r*0.4, cx,cy+1.4*r);
  ctx.bezierCurveTo(cx+2*r,cy+r*0.4, cx+r,cy-r, cx,cy);
  ctx.fill();
}

/* ================== DESENHO: PERSONAGEM (menina) ================== */
function drawPlayer() {
  const sx = player.x - cameraX;
  const sy = player.y;

  ctx.save();
  ctx.translate(sx, sy);

  // sombra
  ctx.fillStyle = 'rgba(0,0,0,.15)';
  ctx.beginPath();
  ctx.ellipse(player.w/2, player.h, 18, 6, 0, 0, Math.PI*2);
  ctx.fill();

  // corpo/vestido
  ctx.fillStyle = player.colorDress;
  ctx.beginPath();
  ctx.moveTo(player.w/2, 10);
  ctx.lineTo(player.w-5, player.h-8);
  ctx.lineTo(5, player.h-8);
  ctx.closePath();
  ctx.fill();

  // cabe√ßa
  ctx.fillStyle = player.colorSkin;
  ctx.beginPath();
  ctx.arc(player.w/2, 14, 11, 0, Math.PI*2);
  ctx.fill();

  // cabelo
  ctx.fillStyle = player.colorHair;
  ctx.beginPath();
  ctx.arc(player.w/2, 14, 12, Math.PI*0.2, Math.PI*0.8);
  ctx.lineTo(player.w/2, 30);
  ctx.closePath();
  ctx.fill();

  // la√ßo
  ctx.fillStyle = player.colorBow;
  ctx.beginPath();
  ctx.ellipse(player.w/2+8, 6, 5, 3, 0, 0, Math.PI*2); ctx.fill();
  ctx.beginPath();
  ctx.ellipse(player.w/2-8, 6, 5, 3, 0, 0, Math.PI*2); ctx.fill();

  // olhos
  ctx.fillStyle = '#2b2b2b';
  ctx.beginPath(); ctx.arc(player.w/2-4, 14, 1.5, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(player.w/2+4, 14, 1.5, 0, Math.PI*2); ctx.fill();

  // ‚Äúpernas‚Äù (simples) ‚Äî anima√ß√£o fake
  const t = Date.now()/120;
  const k = Math.sin(t) * (Math.abs(player.vx) > 0.3 ? 5 : 0);
  ctx.strokeStyle = '#2b2b2b'; ctx.lineWidth = 3; ctx.lineCap='round';
  ctx.beginPath(); ctx.moveTo(player.w/2-6, player.h-8); ctx.lineTo(player.w/2-6, player.h-8+k); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(player.w/2+6, player.h-8); ctx.lineTo(player.w/2+6, player.h-8-k); ctx.stroke();

  ctx.restore();
}

/* ================== F√çSICA E COLIS√ÉO ================== */
function aabb(a,b){
  return a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y;
}
function resolveCollisions() {
  player.onGround = false;

  const bbox = {x:player.x, y:player.y, w:player.w, h:player.h};

  for (const p of platforms){
    // apenas objetos s√≥lidos
    if (p.type==='ground' || p.type==='block' || p.type==='pipe'){
      const b = {x:p.x, y:p.y, w:p.w, h:p.h};
      if (!aabb(bbox,b)) continue;

      const prev = {x: player.x - player.vx, y: player.y - player.vy, w: player.w, h: player.h};
      // colis√£o vertical (de cima)
      if (prev.y + prev.h <= p.y && player.vy > 0){
        player.y = p.y - player.h;
        player.vy = 0;
        player.onGround = true;
      }
      // colis√£o vertical (de baixo)
      else if (prev.y >= p.y + p.h && player.vy < 0){
        player.y = p.y + p.h;
        player.vy = 0.3;
      }
      // colis√£o lateral
      else if (prev.x + prev.w <= p.x && player.vx > 0){
        player.x = p.x - player.w;
        player.vx = 0;
      } else if (prev.x >= p.x + p.w && player.vx < 0){
        player.x = p.x + p.w;
        player.vx = 0;
      }
      bbox.x = player.x; bbox.y = player.y;
    }
  }

  // ch√£o m√≠nimo do mundo
  if (player.y + player.h > groundY){
    player.y = groundY - player.h; player.vy = 0; player.onGround = true;
  }
}

/* ================== LOOP ================== */
let last = 0;
function update(dt){
  // input horizontal
  if (keys.has('ArrowRight')) player.vx = Math.min(player.vx + player.speed, player.maxSpeed);
  else if (keys.has('ArrowLeft')) player.vx = Math.max(player.vx - player.speed, -player.maxSpeed);
  else player.vx *= world.friction;

  // pulo
  if ((keys.has('Space') || keys.has('ArrowUp')) && player.onGround){
    player.vy = -player.jumpPower;
    player.onGround = false;
  }

  // aplicar f√≠sica
  player.vy += world.gravity * (dt/16.7);
  player.x += player.vx;
  player.y += player.vy;

  // manter no mundo
  player.x = Math.max(0, Math.min(player.x, world.width - player.w));

  // colis√µes
  resolveCollisions();

  // c√¢mera segue a Nina
  const target = player.x - W*0.42;
  cameraX += (target - cameraX) * 0.12;
  cameraX = Math.max(0, Math.min(cameraX, world.width - W));

  // checagem de bandeira (AP√ìS CRUZAR)
  const playerFront = player.x + player.w;
  const finishLineX = flag.x + flag.w; // usar a ponta da bandeira
  if (!flag.reached && playerFront >= flag.x){ flag.reached = true; } // encostou
  if (!flag.crossed && flag.reached && player.x > finishLineX){
    flag.crossed = true;
    showQuestion();
  }
}

function render(){
  ctx.clearRect(0,0,W,H);
  drawBackground();
  drawLevel();
  drawPlayer();
}

function loop(ts){
  const dt = Math.min(32, ts - last || 16.7);
  last = ts;
  update(dt);
  render();
  requestAnimationFrame(loop);
}

/* ================== INICIALIZA√á√ÉO ================== */
function start(){
  // coloca a Nina no ch√£o
  player.y = groundY - player.h;
  requestAnimationFrame(loop);
}
start();

/* ================== PERGUNTA FINAL ================== */
const modal = document.getElementById('question');
const btnYes = document.getElementById('yes');
const btnNo  = document.getElementById('no');

function showQuestion(){
  // pequena anima√ß√£o de bandeira conclu√≠da
  setTimeout(()=>{
    modal.style.display = 'flex';
  }, 350);
}

btnYes.addEventListener('click', ()=>{
  // link de meme (troque se quiser)
  window.location.href = 'https://youtu.be/2owrja1jowo?si=k1RRu7OUiY-Jr7G3';
});

// Bot√£o "N√£o" fuj√£o
btnNo.addEventListener('mouseenter', ()=>{
  const dx = (Math.random()*220 - 110);
  const dy = (Math.random()*160 - 80);
  btnNo.style.transform = `translate(${dx}px,${dy}px)`;
});

// Seguran√ßa extra: impede Enter/Espa√ßo acidental no "N√£o"
btnNo.addEventListener('keydown', e => e.preventDefault());
</script>
</body>
</html>
